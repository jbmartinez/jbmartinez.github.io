!function(){$(document).ready(function(){"use strict";function t(){a<o.scrollTop()&&!s.hasClass("has-docked-nav")&&(h.pause(),s.addClass("has-docked-nav")),a>o.scrollTop()&&s.hasClass("has-docked-nav")&&(h.resume(),s.removeClass("has-docked-nav"))}function i(){s.removeClass("has-docked-nav"),a=n.offset().top,t()}function r(){o.on("scroll",t),o.on("resize",i),t()}var n=$("nav.navbar"),s=$("body"),o=$(window),a=n.offset().top,h={},l=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t};l()?(h.pause=function(){},h.resume=function(){}):h=e(),r();var c=$("#menu");$("a.pure-menu-link","nav.navbar").click(function(){c.prop("checked")&&c.prop("checked",!1)})});var t={FRONT:0,BACK:1,DOUBLE:2,SVGNS:"http://www.w3.org/2000/svg"};t.Array="function"==typeof Float32Array?Float32Array:Array,t.Utils={isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+r)},r);return t=i+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),Math.PIM2=2*Math.PI,Math.PID2=Math.PI/2,Math.randomInRange=function(t,e){return t+(e-t)*Math.random()},Math.clamp=function(t,e,i){return t=Math.max(t,e),t=Math.min(t,i)},t.Vector3={create:function(e,i,r){var n=new t.Array(3);return this.set(n,e,i,r),n},clone:function(t){var e=this.create();return this.copy(e,t),e},set:function(t,e,i,r){return t[0]=e||0,t[1]=i||0,t[2]=r||0,this},setX:function(t,e){return t[0]=e||0,this},setY:function(t,e){return t[1]=e||0,this},setZ:function(t,e){return t[2]=e||0,this},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],this},add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],this},addVectors:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],this},addScalar:function(t,e){return t[0]+=e,t[1]+=e,t[2]+=e,this},subtract:function(t,e){return t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],this},subtractVectors:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],this},subtractScalar:function(t,e){return t[0]-=e,t[1]-=e,t[2]-=e,this},multiply:function(t,e){return t[0]*=e[0],t[1]*=e[1],t[2]*=e[2],this},multiplyVectors:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],this},multiplyScalar:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,this},divide:function(t,e){return t[0]/=e[0],t[1]/=e[1],t[2]/=e[2],this},divideVectors:function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],this},divideScalar:function(t,e){return 0!==e?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0),this},cross:function(t,e){var i=t[0],r=t[1],n=t[2];return t[0]=r*e[2]-n*e[1],t[1]=n*e[0]-i*e[2],t[2]=i*e[1]-r*e[0],this},crossVectors:function(t,e,i){return t[0]=e[1]*i[2]-e[2]*i[1],t[1]=e[2]*i[0]-e[0]*i[2],t[2]=e[0]*i[1]-e[1]*i[0],this},min:function(t,e){return t[0]<e&&(t[0]=e),t[1]<e&&(t[1]=e),t[2]<e&&(t[2]=e),this},max:function(t,e){return t[0]>e&&(t[0]=e),t[1]>e&&(t[1]=e),t[2]>e&&(t[2]=e),this},clamp:function(t,e,i){return this.min(t,e),this.max(t,i),this},limit:function(t,e,i){var r=this.length(t);return null!==e&&e>r?this.setLength(t,e):null!==i&&r>i&&this.setLength(t,i),this},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},normalise:function(t){return this.divideScalar(t,this.length(t))},negate:function(t){return this.multiplyScalar(t,-1)},distanceSquared:function(t,e){var i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n},distance:function(t,e){return Math.sqrt(this.distanceSquared(t,e))},lengthSquared:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},length:function(t){return Math.sqrt(this.lengthSquared(t))},setLength:function(t,e){var i=this.length(t);return 0!==i&&e!==i&&this.multiplyScalar(t,e/i),this}},t.Vector4={create:function(e,i,r){var n=new t.Array(4);return this.set(n,e,i,r),n},set:function(t,e,i,r,n){return t[0]=e||0,t[1]=i||0,t[2]=r||0,t[3]=n||0,this},setX:function(t,e){return t[0]=e||0,this},setY:function(t,e){return t[1]=e||0,this},setZ:function(t,e){return t[2]=e||0,this},setW:function(t,e){return t[3]=e||0,this},add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t[3]+=e[3],this},multiplyVectors:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],this},multiplyScalar:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,this},min:function(t,e){return t[0]<e&&(t[0]=e),t[1]<e&&(t[1]=e),t[2]<e&&(t[2]=e),t[3]<e&&(t[3]=e),this},max:function(t,e){return t[0]>e&&(t[0]=e),t[1]>e&&(t[1]=e),t[2]>e&&(t[2]=e),t[3]>e&&(t[3]=e),this},clamp:function(t,e,i){return this.min(t,e),this.max(t,i),this}},t.Color=function(e,i){this.rgba=t.Vector4.create(),this.hex=e||"#000000",this.opacity=t.Utils.isNumber(i)?i:1,this.set(this.hex,this.opacity)},t.Color.prototype={set:function(e,i){e=e.replace("#","");var r=e.length/3;return this.rgba[0]=parseInt(e.substring(0*r,1*r),16)/255,this.rgba[1]=parseInt(e.substring(1*r,2*r),16)/255,this.rgba[2]=parseInt(e.substring(2*r,3*r),16)/255,this.rgba[3]=t.Utils.isNumber(i)?i:this.rgba[3],this},hexify:function(t){var e=Math.ceil(255*t).toString(16);return 1===e.length&&(e="0"+e),e},format:function(){var t=this.hexify(this.rgba[0]),e=this.hexify(this.rgba[1]),i=this.hexify(this.rgba[2]);return this.hex="#"+t+e+i,this.hex}},t.Object=function(){this.position=t.Vector3.create()},t.Object.prototype={setPosition:function(e,i,r){return t.Vector3.set(this.position,e,i,r),this}},t.Light=function(e,i){t.Object.call(this),this.ambient=new t.Color(e||"#FFFFFF"),this.diffuse=new t.Color(i||"#FFFFFF"),this.ray=t.Vector3.create()},t.Light.prototype=Object.create(t.Object.prototype),t.Vertex=function(e,i,r){this.position=t.Vector3.create(e,i,r)},t.Vertex.prototype={setPosition:function(e,i,r){return t.Vector3.set(this.position,e,i,r),this}},t.Triangle=function(e,i,r){this.a=e||new t.Vertex,this.b=i||new t.Vertex,this.c=r||new t.Vertex,this.vertices=[this.a,this.b,this.c],this.u=t.Vector3.create(),this.v=t.Vector3.create(),this.centroid=t.Vector3.create(),this.normal=t.Vector3.create(),this.color=new t.Color,this.polygon=document.createElementNS(t.SVGNS,"polygon"),this.polygon.setAttributeNS(null,"stroke-linejoin","round"),this.polygon.setAttributeNS(null,"stroke-miterlimit","1"),this.polygon.setAttributeNS(null,"stroke-width","1"),this.computeCentroid(),this.computeNormal()},t.Triangle.prototype={computeCentroid:function(){return this.centroid[0]=this.a.position[0]+this.b.position[0]+this.c.position[0],this.centroid[1]=this.a.position[1]+this.b.position[1]+this.c.position[1],this.centroid[2]=this.a.position[2]+this.b.position[2]+this.c.position[2],t.Vector3.divideScalar(this.centroid,3),this},computeNormal:function(){return t.Vector3.subtractVectors(this.u,this.b.position,this.a.position),t.Vector3.subtractVectors(this.v,this.c.position,this.a.position),t.Vector3.crossVectors(this.normal,this.u,this.v),t.Vector3.normalise(this.normal),this}},t.Geometry=function(){this.vertices=[],this.triangles=[],this.dirty=!1},t.Geometry.prototype={update:function(){if(this.dirty){var t,e;for(t=this.triangles.length-1;t>=0;t--)e=this.triangles[t],e.computeCentroid(),e.computeNormal();this.dirty=!1}return this}},t.Plane=function(e,i,r,n){t.Geometry.call(this),this.width=e||100,this.height=i||100,this.segments=r||4,this.slices=n||4,this.segmentWidth=this.width/this.segments,this.sliceHeight=this.height/this.slices;var s,o,a,h,l,c,u,f=[],m=this.width*-.5,d=.5*this.height;for(s=0;s<=this.segments;s++)for(f.push([]),o=0;o<=this.slices;o++)u=new t.Vertex(m+s*this.segmentWidth,d-o*this.sliceHeight),f[s].push(u),this.vertices.push(u);for(s=0;s<this.segments;s++)for(o=0;o<this.slices;o++)a=f[s+0][o+0],h=f[s+0][o+1],l=f[s+1][o+0],c=f[s+1][o+1],t0=new t.Triangle(a,h,l),t1=new t.Triangle(l,h,c),this.triangles.push(t0,t1)},t.Plane.prototype=Object.create(t.Geometry.prototype),t.Material=function(e,i){this.ambient=new t.Color(e||"#444444"),this.diffuse=new t.Color(i||"#FFFFFF"),this.slave=new t.Color},t.Mesh=function(e,i){t.Object.call(this),this.geometry=e||new t.Geometry,this.material=i||new t.Material,this.side=t.FRONT,this.visible=!0},t.Mesh.prototype=Object.create(t.Object.prototype),t.Mesh.prototype.update=function(e,i){var r,n,s,o,a;if(this.geometry.update(),i)for(r=this.geometry.triangles.length-1;r>=0;r--){for(n=this.geometry.triangles[r],t.Vector4.set(n.color.rgba),s=e.length-1;s>=0;s--)o=e[s],t.Vector3.subtractVectors(o.ray,o.position,n.centroid),t.Vector3.normalise(o.ray),a=t.Vector3.dot(n.normal,o.ray),this.side===t.FRONT?a=Math.max(a,0):this.side===t.BACK?a=Math.abs(Math.min(a,0)):this.side===t.DOUBLE&&(a=Math.max(Math.abs(a),0)),t.Vector4.multiplyVectors(this.material.slave.rgba,this.material.ambient.rgba,o.ambient.rgba),t.Vector4.add(n.color.rgba,this.material.slave.rgba),t.Vector4.multiplyVectors(this.material.slave.rgba,this.material.diffuse.rgba,o.diffuse.rgba),t.Vector4.multiplyScalar(this.material.slave.rgba,a),t.Vector4.add(n.color.rgba,this.material.slave.rgba);t.Vector4.clamp(n.color.rgba,0,1)}return this},t.Scene=function(){this.meshes=[],this.lights=[]},t.Scene.prototype={add:function(e){return e instanceof t.Mesh&&!~this.meshes.indexOf(e)?this.meshes.push(e):e instanceof t.Light&&!~this.lights.indexOf(e)&&this.lights.push(e),this},remove:function(e){return e instanceof t.Mesh&&~this.meshes.indexOf(e)?this.meshes.splice(this.meshes.indexOf(e),1):e instanceof t.Light&&~this.lights.indexOf(e)&&this.lights.splice(this.lights.indexOf(e),1),this}},t.Renderer=function(){this.width=0,this.height=0,this.halfWidth=0,this.halfHeight=0},t.Renderer.prototype={setSize:function(t,e){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this):void 0},clear:function(){return this},render:function(){return this}},t.CanvasRenderer=function(){t.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.context=this.element.getContext("2d"),this.setSize(this.element.width,this.element.height)},t.CanvasRenderer.prototype=Object.create(t.Renderer.prototype),t.CanvasRenderer.prototype.setSize=function(e,i){return t.Renderer.prototype.setSize.call(this,e,i),this.element.width=e,this.element.height=i,this.context.setTransform(1,0,0,-1,this.halfWidth,this.halfHeight),this},t.CanvasRenderer.prototype.clear=function(){return t.Renderer.prototype.clear.call(this),this.context.clearRect(-this.halfWidth,-this.halfHeight,this.width,this.height),this},t.CanvasRenderer.prototype.render=function(e){t.Renderer.prototype.render.call(this,e);var i,r,n,s,o;for(this.clear(),this.context.lineJoin="round",this.context.lineWidth=1,i=e.meshes.length-1;i>=0;i--)if(r=e.meshes[i],r.visible)for(r.update(e.lights,!0),n=r.geometry.triangles.length-1;n>=0;n--)s=r.geometry.triangles[n],o=s.color.format(),this.context.beginPath(),this.context.moveTo(s.a.position[0],s.a.position[1]),this.context.lineTo(s.b.position[0],s.b.position[1]),this.context.lineTo(s.c.position[0],s.c.position[1]),this.context.closePath(),this.context.strokeStyle=o,this.context.fillStyle=o,this.context.stroke(),this.context.fill();return this},t.WebGLRenderer=function(){t.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.vertices=null,this.lights=null;var e={preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0,stencil:!0,alpha:!0};return this.gl=this.getContext(this.element,e),this.unsupported=!this.gl,this.unsupported?"WebGL is not supported by your browser.":(this.gl.clearColor(0,0,0,0),this.gl.enable(this.gl.DEPTH_TEST),this.setSize(this.element.width,this.element.height),void 0)},t.WebGLRenderer.prototype=Object.create(t.Renderer.prototype),t.WebGLRenderer.prototype.getContext=function(t,e){var i=!1;try{if(!(i=t.getContext("experimental-webgl",e)))throw"Error creating WebGL context."}catch(r){console.error(r)}return i},t.WebGLRenderer.prototype.setSize=function(e,i){return t.Renderer.prototype.setSize.call(this,e,i),this.unsupported?void 0:(this.element.width=e,this.element.height=i,this.gl.viewport(0,0,e,i),this)},t.WebGLRenderer.prototype.clear=function(){return t.Renderer.prototype.clear.call(this),this.unsupported?void 0:(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this)},t.WebGLRenderer.prototype.render=function(e){if(t.Renderer.prototype.render.call(this,e),!this.unsupported){var i,r,n,s,o,a,h,l,c,u,f,m,d,g,p,b=!1,v=e.lights.length,y=0;if(this.clear(),this.lights!==v){if(this.lights=v,this.lights<=0)return;this.buildProgram(v)}if(this.program){for(i=e.meshes.length-1;i>=0;i--)r=e.meshes[i],r.geometry.dirty&&(b=!0),r.update(e.lights,!1),y+=3*r.geometry.triangles.length;if(b||this.vertices!==y){this.vertices=y;for(l in this.program.attributes){for(u=this.program.attributes[l],u.data=new t.Array(y*u.size),d=0,i=e.meshes.length-1;i>=0;i--)for(r=e.meshes[i],n=0,s=r.geometry.triangles.length;s>n;n++)for(o=r.geometry.triangles[n],g=0,p=o.vertices.length;p>g;g++){switch(vertex=o.vertices[g],l){case"side":this.setBufferData(d,u,r.side);break;case"position":this.setBufferData(d,u,vertex.position);break;case"centroid":this.setBufferData(d,u,o.centroid);break;case"normal":this.setBufferData(d,u,o.normal);break;case"ambient":this.setBufferData(d,u,r.material.ambient.rgba);break;case"diffuse":this.setBufferData(d,u,r.material.diffuse.rgba)}d++}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,u.data,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(u.location),this.gl.vertexAttribPointer(u.location,u.size,this.gl.FLOAT,!1,0,0)}}for(this.setBufferData(0,this.program.uniforms.resolution,[this.width,this.height,this.width]),a=v-1;a>=0;a--)h=e.lights[a],this.setBufferData(a,this.program.uniforms.lightPosition,h.position),this.setBufferData(a,this.program.uniforms.lightAmbient,h.ambient.rgba),this.setBufferData(a,this.program.uniforms.lightDiffuse,h.diffuse.rgba);for(c in this.program.uniforms)switch(u=this.program.uniforms[c],m=u.location,f=u.data,u.structure){case"3f":this.gl.uniform3f(m,f[0],f[1],f[2]);break;case"3fv":this.gl.uniform3fv(m,f);break;case"4fv":this.gl.uniform4fv(m,f)}}return this.gl.drawArrays(this.gl.TRIANGLES,0,this.vertices),this}},t.WebGLRenderer.prototype.setBufferData=function(e,i,r){if(t.Utils.isNumber(r))i.data[e*i.size]=r;else for(var n=r.length-1;n>=0;n--)i.data[e*i.size+n]=r[n]},t.WebGLRenderer.prototype.buildProgram=function(e){if(!this.unsupported){var i=t.WebGLRenderer.VS(e),r=t.WebGLRenderer.FS(e),n=i+r;if(!this.program||this.program.code!==n){var s=this.gl.createProgram(),o=this.buildShader(this.gl.VERTEX_SHADER,i),a=this.buildShader(this.gl.FRAGMENT_SHADER,r);if(this.gl.attachShader(s,o),this.gl.attachShader(s,a),this.gl.linkProgram(s),!this.gl.getProgramParameter(s,this.gl.LINK_STATUS)){var h=this.gl.getError(),l=this.gl.getProgramParameter(s,this.gl.VALIDATE_STATUS);return console.error("Could not initialise shader.\nVALIDATE_STATUS: "+l+"\nERROR: "+h),null}return this.gl.deleteShader(a),this.gl.deleteShader(o),s.code=n,s.attributes={side:this.buildBuffer(s,"attribute","aSide",1,"f"),position:this.buildBuffer(s,"attribute","aPosition",3,"v3"),centroid:this.buildBuffer(s,"attribute","aCentroid",3,"v3"),normal:this.buildBuffer(s,"attribute","aNormal",3,"v3"),ambient:this.buildBuffer(s,"attribute","aAmbient",4,"v4"),diffuse:this.buildBuffer(s,"attribute","aDiffuse",4,"v4")},s.uniforms={resolution:this.buildBuffer(s,"uniform","uResolution",3,"3f",1),lightPosition:this.buildBuffer(s,"uniform","uLightPosition",3,"3fv",e),lightAmbient:this.buildBuffer(s,"uniform","uLightAmbient",4,"4fv",e),lightDiffuse:this.buildBuffer(s,"uniform","uLightDiffuse",4,"4fv",e)},this.program=s,this.gl.useProgram(this.program),s}}},t.WebGLRenderer.prototype.buildShader=function(t,e){if(!this.unsupported){var i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.error(this.gl.getShaderInfoLog(i)),null)}},t.WebGLRenderer.prototype.buildBuffer=function(e,i,r,n,s,o){var a={buffer:this.gl.createBuffer(),size:n,structure:s,data:null};switch(i){case"attribute":a.location=this.gl.getAttribLocation(e,r);break;case"uniform":a.location=this.gl.getUniformLocation(e,r)}return o&&(a.data=new t.Array(o*n)),a},t.WebGLRenderer.VS=function(t){var e=["precision mediump float;","#define LIGHTS "+t,"attribute float aSide;\nattribute vec3 aPosition;\nattribute vec3 aCentroid;\nattribute vec3 aNormal;\nattribute vec4 aAmbient;\nattribute vec4 aDiffuse;\nuniform vec3 uResolution;\nuniform vec3 uLightPosition[LIGHTS];\nuniform vec4 uLightAmbient[LIGHTS];\nuniform vec4 uLightDiffuse[LIGHTS];\nvarying vec4 vColor;\nvoid main() {\nvColor = vec4(0.0);\nvec3 position = aPosition / uResolution * 2.0;\nfor (int i = 0; i < LIGHTS; i++) {\nvec3 lightPosition = uLightPosition[i];\nvec4 lightAmbient = uLightAmbient[i];\nvec4 lightDiffuse = uLightDiffuse[i];\nvec3 ray = normalize(lightPosition - aCentroid);\nfloat illuminance = dot(aNormal, ray);\nif (aSide == 0.0) {\nilluminance = max(illuminance, 0.0);\n} else if (aSide == 1.0) {\nilluminance = abs(min(illuminance, 0.0));\n} else if (aSide == 2.0) {\nilluminance = max(abs(illuminance), 0.0);\n}\nvColor += aAmbient * lightAmbient;\nvColor += aDiffuse * lightDiffuse * illuminance;\n}\nvColor = clamp(vColor, 0.0, 1.0);\ngl_Position = vec4(position, 1.0);\n}"].join("\n");return e},t.WebGLRenderer.FS=function(){var t="precision mediump float;\nvarying vec4 vColor;\nvoid main() {\ngl_FragColor = vColor;\n}";return t},t.SVGRenderer=function(){t.Renderer.call(this),this.element=document.createElementNS(t.SVGNS,"svg"),this.element.setAttribute("xmlns",t.SVGNS),this.element.setAttribute("version","1.1"),this.element.style.display="block",this.setSize(300,150)},t.SVGRenderer.prototype=Object.create(t.Renderer.prototype),t.SVGRenderer.prototype.setSize=function(e,i){return t.Renderer.prototype.setSize.call(this,e,i),this.element.setAttribute("width",e),this.element.setAttribute("height",i),this},t.SVGRenderer.prototype.clear=function(){t.Renderer.prototype.clear.call(this);for(var e=this.element.childNodes.length-1;e>=0;e--)this.element.removeChild(this.element.childNodes[e]);return this},t.SVGRenderer.prototype.render=function(e){t.Renderer.prototype.render.call(this,e);var i,r,n,s,o,a;for(i=e.meshes.length-1;i>=0;i--)if(r=e.meshes[i],r.visible)for(r.update(e.lights,!0),n=r.geometry.triangles.length-1;n>=0;n--)s=r.geometry.triangles[n],s.polygon.parentNode!==this.element&&this.element.appendChild(s.polygon),o=this.formatPoint(s.a)+" ",o+=this.formatPoint(s.b)+" ",o+=this.formatPoint(s.c),a=this.formatStyle(s.color.format()),s.polygon.setAttributeNS(null,"points",o),s.polygon.setAttributeNS(null,"style",a);return this},t.SVGRenderer.prototype.formatPoint=function(t){return this.halfWidth+t.position[0]+","+(this.halfHeight-t.position[1])},t.SVGRenderer.prototype.formatStyle=function(t){var e="fill:"+t+";";return e+="stroke:"+t+";"};var e=function(){"use strict";function e(){d&&L.removeChild(d.element),d=y,d.setSize(k.offsetWidth,k.offsetHeight),L.appendChild(d.element)}function i(){y=new t.CanvasRenderer,e(x.renderer)}function r(){g=new t.Scene}function n(){g.remove(p),b=new t.Plane(S.width*d.width,S.height*d.height,S.segments,S.slices),v=new t.Material(S.ambient,S.diffuse),p=new t.Mesh(b,v),g.add(p);var e,i;for(e=b.vertices.length-1;e>=0;e--)i=b.vertices[e],i.anchor=t.Vector3.clone(i.position),i.step=t.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),i.time=Math.randomInRange(0,Math.PIM2)}function s(){var e,i;for(e=g.lights.length-1;e>=0;e--)i=g.lights[e],g.remove(i);for(e=0;e<R.count;e++)i=new t.Light(R.ambient,R.diffuse),i.ambientHex=i.ambient.format(),i.diffuseHex=i.diffuse.format(),g.add(i)}function o(e,i){d.setSize(e,i),t.Vector3.set(A,d.halfWidth,d.halfHeight),n()}function a(){var e,i,r,n,s,o,a,h=S.depth/2;for(n=g.lights.length-1;n>=0;n--)s=g.lights[n],t.Vector3.setZ(s.position,R.zOffset);for(o=b.vertices.length-1;o>=0;o--)a=b.vertices[o],e=Math.sin(a.time+a.step[0]*m*S.speed),i=Math.cos(a.time+a.step[1]*m*S.speed),r=Math.sin(a.time+a.step[2]*m*S.speed),t.Vector3.set(a.position,S.xRange*b.segmentWidth*e,S.yRange*b.sliceHeight*i,S.zRange*h*r-h),t.Vector3.add(a.position,a.anchor)}function h(){d.render(g)}function l(){return w?(m=Date.now()-V,m%5===0&&(a(),h()),void requestAnimationFrame(l)):!1}function c(){window.addEventListener("resize",f)}function u(){i(),r(),n(),s(),c(),o(k.offsetWidth,k.offsetHeight),l()}function f(){o(k.offsetWidth,k.offsetHeight),h()}var m,d,g,p,b,v,y,w=!0,S={width:1.8,height:1.8,depth:5,segments:16,slices:8,xRange:.8,yRange:.1,zRange:1,ambient:"#555555",diffuse:"#696969",speed:1e-4},R={count:2,xyScalar:1,zOffset:100,ambient:"#1A8094",diffuse:"#afafaf",speed:2e-4,gravity:500,dampening:.95,minLimit:10,maxLimit:null,minDistance:20,maxDistance:400,autopilot:!1,draw:!1,bounds:t.Vector3.create(),step:t.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1))},x={renderer:"canvas"},V=Date.now(),A=t.Vector3.create(),k=document.getElementById("container"),L=document.getElementById("output"),C={};return C.pause=function(){w=!1},C.resume=function(){w=!0,l()},u(),C}}();